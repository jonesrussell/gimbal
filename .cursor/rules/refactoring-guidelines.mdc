---
description: Guidelines for refactoring code safely
globs: ["**/*.go"]
alwaysApply: false
---

# Refactoring Guidelines

## Minimal Fix Approach
- Match existing interfaces before changing implementations
- Build after each change to verify compilation
- Run tests after each logical change

## Safe Refactoring Steps
1. Read and understand the existing code
2. Identify all call sites that will be affected
3. Update interface/signature first
4. Update implementation to match
5. Update all call sites systematically
6. Build and test

## Interface Changes
- Check if contracts already exist (interfaces may already have the desired signature)
- Update implementation to match existing contracts when possible
- Avoid breaking changes to public APIs

## Code Quality Checks
```bash
task lint          # Check for issues
task tests:all     # Run all tests
go build ./...     # Verify compilation
```
